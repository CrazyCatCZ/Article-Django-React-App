{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\programs\\\\django+react\\\\tutorials\\\\graphql_django\\\\frontend\\\\gui\\\\src\\\\App.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport { useMutation } from '@apollo/react-hooks';\nimport './App.css';\nimport { USER_REFRESH_TOKEN_MUTATION } from './components/Api/user'; //Additional Components\n\nimport Navbar from './components/Additional/Navbar/Navbar';\nimport Users from './components/Additional/Users/Users'; //Authentication\n\nimport Login from './components/Authentication/Login/Login';\nimport Register from './components/Authentication/Register/Register'; //Posts\n\nimport Posts from './components/Posts/Posts/Posts';\nimport PostDetail from './components/Posts/PostDetail/PostDetail';\nimport PostCreate from './components/Posts/PostCreate/PostCreate';\nimport PostEdit from './components/Posts/PostEdit'; //Profiles\n\nimport Profile from './components/Profiles/Profile'; //Messages \n\nimport MessagesContainer from './components/Messages/Messages/MessagesContainer';\n\nfunction App() {\n  const history = useHistory();\n  const [allowUserToEnter, setAllowUserToEnter] = useState(false);\n\n  const verifyUserToken = (tokenData, user) => {\n    const {\n      verifyToken: {\n        success,\n        payload\n      }\n    } = tokenData;\n    console.log(success, payload.username, user); //if success is true and the user from backend is same in frontend\n\n    if (success === true && payload.username === user) {\n      setAllowUserToEnter(true);\n      window.location.reload(false);\n      history.push('/');\n    } else {\n      setAllowUserToEnter(false);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }, allowUserToEnter ? /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/users\",\n    component: () => /*#__PURE__*/React.createElement(Users, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 55\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/message/:chatUser\",\n    component: () => /*#__PURE__*/React.createElement(MessagesContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 67\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile/:user\",\n    component: () => /*#__PURE__*/React.createElement(Profile, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 63\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/editPost/:id\",\n    component: () => /*#__PURE__*/React.createElement(PostEdit, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 62\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/createPost\",\n    component: () => /*#__PURE__*/React.createElement(PostCreate, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 60\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/:id\",\n    component: () => /*#__PURE__*/React.createElement(PostDetail, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 53\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/\",\n    component: () => /*#__PURE__*/React.createElement(Posts, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 50\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  })) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Route, {\n    path: \"/login\",\n    component: () => /*#__PURE__*/React.createElement(Login, {\n      verifyUserToken: verifyUserToken,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 55\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/register\",\n    component: () => /*#__PURE__*/React.createElement(Register, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 58\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }\n  })))));\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/Admin/programs/django+react/tutorials/graphql_django/frontend/gui/src/App.js"],"names":["React","useState","useEffect","Route","Switch","useHistory","useMutation","USER_REFRESH_TOKEN_MUTATION","Navbar","Users","Login","Register","Posts","PostDetail","PostCreate","PostEdit","Profile","MessagesContainer","App","history","allowUserToEnter","setAllowUserToEnter","verifyUserToken","tokenData","user","verifyToken","success","payload","console","log","username","window","location","reload","push"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Route, Switch, useHistory } from 'react-router-dom'\r\nimport { useMutation } from '@apollo/react-hooks'\r\n\r\nimport './App.css'\r\nimport { USER_REFRESH_TOKEN_MUTATION } from './components/Api/user'\r\n\r\n//Additional Components\r\nimport Navbar from './components/Additional/Navbar/Navbar'\r\nimport Users from './components/Additional/Users/Users'\r\n\r\n//Authentication\r\nimport Login from './components/Authentication/Login/Login'\r\nimport Register from './components/Authentication/Register/Register'\r\n\r\n//Posts\r\nimport Posts from './components/Posts/Posts/Posts'\r\nimport PostDetail from './components/Posts/PostDetail/PostDetail'\r\nimport PostCreate from './components/Posts/PostCreate/PostCreate'\r\nimport PostEdit from './components/Posts/PostEdit'\r\n\r\n//Profiles\r\nimport Profile from './components/Profiles/Profile'\r\n\r\n//Messages \r\nimport MessagesContainer from './components/Messages/Messages/MessagesContainer'\r\n\r\nfunction App () {\r\n  const history = useHistory()\r\n  const [ allowUserToEnter, setAllowUserToEnter ]= useState(false)\r\n\r\n  const verifyUserToken = (tokenData, user) => {\r\n    const { verifyToken: { success, payload }} = tokenData\r\n    console.log(success, payload.username, user)\r\n\r\n    //if success is true and the user from backend is same in frontend\r\n    if (success === true && payload.username === user) {\r\n      setAllowUserToEnter(true)\r\n      \r\n      window.location.reload(false);\r\n      history.push('/')\r\n    }\r\n\r\n    else {\r\n      setAllowUserToEnter(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Navbar />\r\n      <Switch>\r\n          <div>\r\n            {/*check if verification was successfull and user from localStorage is same from backend*/}\r\n            {(allowUserToEnter) ? (\r\n              <Switch>\r\n                <Route path=\"/users\" component={() => <Users />} />\r\n                <Route path=\"/message/:chatUser\" component={() => <MessagesContainer />} />\r\n                <Route path=\"/profile/:user\" component={() => <Profile />} />\r\n                <Route path=\"/editPost/:id\" component={() => <PostEdit />} />\r\n                <Route path=\"/createPost\" component={() => <PostCreate />} />\r\n                <Route path=\"/:id\" component={() => <PostDetail />} />\r\n                <Route path=\"/\" component={() => <Posts />} />\r\n              </Switch>  \r\n            ) : (\r\n              <>\r\n                <Route path=\"/login\" component={() => <Login verifyUserToken={verifyUserToken} />} />\r\n                <Route path=\"/register\" component={() => <Register />} />\r\n              </>\r\n            )}\r\n          </div>\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\programs\\\\django+react\\\\tutorials\\\\graphql_django\\\\frontend\\\\gui\\\\src\\\\components\\\\Profiles\\\\SubmitButton.js\";\nimport React, { useEffect } from 'react';\nimport { useMutation } from '@apollo/react-hooks';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { USER_UPDATE_MUTATION } from '../Api/user';\n\nconst SubmitButton = ({\n  allowButton\n}) => {\n  const [profileUpdate, {\n    data: updateData\n  }] = useMutation(USER_UPDATE_MUTATION);\n  const history = useHistory();\n  useEffect(() => {\n    if (updateData) {\n      setErrorMessages(updateData.profileUpdate.message);\n    }\n  }, [updateData]);\n  useEffect(() => {\n    if (updateData !== undefined && updateData.profileUpdate.message === 'Success') {\n      localStorage.removeItem('user');\n      localStorage.removeItem('token');\n      history.push('/login');\n      window.location.reload(false);\n    }\n  }, [updateData]);\n\n  const handleOnSubmit = () => {\n    const usernameValue = usernameRef.current.value;\n    const emailValue = emailRef.current.value;\n    profileUpdate({\n      variables: {\n        user: user,\n        newUser: usernameValue,\n        newEmail: emailValue\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, allowButton ? /*#__PURE__*/React.createElement(Button, {\n    onClick: handleOnSubmit,\n    className: \"submit-button\",\n    type: \"button\",\n    primary: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 17\n    }\n  }, \"Update\") : /*#__PURE__*/React.createElement(Button, {\n    disabled: true,\n    onClick: handleOnSubmit,\n    className: \"submit-button\",\n    type: \"button\",\n    primary: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 17\n    }\n  }, \"Update\"));\n};\n\nexport default SubmitButton;","map":{"version":3,"sources":["C:/Users/Admin/programs/django+react/tutorials/graphql_django/frontend/gui/src/components/Profiles/SubmitButton.js"],"names":["React","useEffect","useMutation","useHistory","useParams","USER_UPDATE_MUTATION","SubmitButton","allowButton","profileUpdate","data","updateData","history","setErrorMessages","message","undefined","localStorage","removeItem","push","window","location","reload","handleOnSubmit","usernameValue","usernameRef","current","value","emailValue","emailRef","variables","user","newUser","newEmail"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,SAASC,UAAT,EAAqBC,SAArB,QAAsC,kBAAtC;AAEA,SAASC,oBAAT,QAAqC,aAArC;;AAEA,MAAMC,YAAY,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAqB;AACtC,QAAM,CAAEC,aAAF,EAAiB;AAAEC,IAAAA,IAAI,EAAEC;AAAR,GAAjB,IAA0CR,WAAW,CAACG,oBAAD,CAA3D;AAEA,QAAMM,OAAO,GAAGR,UAAU,EAA1B;AAEAF,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIS,UAAJ,EAAgB;AACZE,MAAAA,gBAAgB,CAACF,UAAU,CAACF,aAAX,CAAyBK,OAA1B,CAAhB;AACH;AACJ,GAJQ,EAIN,CAACH,UAAD,CAJM,CAAT;AAMAT,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIS,UAAU,KAAKI,SAAf,IAA4BJ,UAAU,CAACF,aAAX,CAAyBK,OAAzB,KAAqC,SAArE,EAAgF;AAC5EE,MAAAA,YAAY,CAACC,UAAb,CAAwB,MAAxB;AACAD,MAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAL,MAAAA,OAAO,CAACM,IAAR,CAAa,QAAb;AACAC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,KAAvB;AACH;AACJ,GAPQ,EAON,CAACV,UAAD,CAPM,CAAT;;AASA,QAAMW,cAAc,GAAG,MAAM;AACzB,UAAMC,aAAa,GAAGC,WAAW,CAACC,OAAZ,CAAoBC,KAA1C;AACA,UAAMC,UAAU,GAAGC,QAAQ,CAACH,OAAT,CAAiBC,KAApC;AAEAjB,IAAAA,aAAa,CAAC;AAAEoB,MAAAA,SAAS,EAAE;AACvBC,QAAAA,IAAI,EAAEA,IADiB;AACXC,QAAAA,OAAO,EAAER,aADE;AAEvBS,QAAAA,QAAQ,EAAEL;AAFa;AAAb,KAAD,CAAb;AAIH,GARD;;AAWA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACMnB,WAAD,gBACG,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAEc,cAAjB;AAAiC,IAAA,SAAS,EAAC,eAA3C;AAA2D,IAAA,IAAI,EAAC,QAAhE;AAAyE,IAAA,OAAO,MAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADH,gBAGG,oBAAC,MAAD;AAAQ,IAAA,QAAQ,MAAhB;AAAiB,IAAA,OAAO,EAAEA,cAA1B;AAA0C,IAAA,SAAS,EAAC,eAApD;AAAoE,IAAA,IAAI,EAAC,QAAzE;AAAkF,IAAA,OAAO,MAAzF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJR,CADJ;AASH,CAxCD;;AA0CA,eAAef,YAAf","sourcesContent":["import React, { useEffect } from 'react'\r\nimport { useMutation } from '@apollo/react-hooks'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\n\r\nimport { USER_UPDATE_MUTATION } from '../Api/user'\r\n\r\nconst SubmitButton = ({ allowButton }) => {\r\n    const [ profileUpdate, { data: updateData } ] = useMutation(USER_UPDATE_MUTATION)\r\n\r\n    const history = useHistory()\r\n\r\n    useEffect(() => {\r\n        if (updateData) {\r\n            setErrorMessages(updateData.profileUpdate.message)\r\n        }\r\n    }, [updateData])\r\n\r\n    useEffect(() => {\r\n        if (updateData !== undefined && updateData.profileUpdate.message === 'Success') {\r\n            localStorage.removeItem('user')\r\n            localStorage.removeItem('token')\r\n            history.push('/login')\r\n            window.location.reload(false)\r\n        }\r\n    }, [updateData])\r\n\r\n    const handleOnSubmit = () => {\r\n        const usernameValue = usernameRef.current.value\r\n        const emailValue = emailRef.current.value\r\n\r\n        profileUpdate({ variables: { \r\n            user: user, newUser: usernameValue,\r\n            newEmail: emailValue }\r\n        })\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            {(allowButton) ? (\r\n                <Button onClick={handleOnSubmit} className=\"submit-button\" type='button' primary>Update</Button>\r\n            ) : (\r\n                <Button disabled onClick={handleOnSubmit} className=\"submit-button\" type='button' primary>Update</Button>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SubmitButton\r\n"]},"metadata":{},"sourceType":"module"}